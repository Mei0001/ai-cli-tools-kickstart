# Cursor CLI

## 概要・特徴

Cursor CLIは、ターミナルから直接AIエージェントにアクセスし、コードの作成、レビュー、変更、ドキュメント化を行うための強力なコマンドラインツールです。対話型のターミナルUIを提供し、スクリプトやCIパイプライン向けの出力自動化にも対応しています。これにより、開発者は作業環境を離れることなく、効率的にコーディング支援を受けることができます。

Cursor CLIは、AIを活用したコードエディタ「Cursor」のコマンドラインインターフェース版であり、IDEを開かずにターミナル上で直接AIエージェントを操作できる点が大きな特徴です。

### 主な特徴

#### 1. インタラクティブモード
- エージェントとの会話セッションを開始し、目標を伝えることができます
- 提案された変更を確認し、コマンドを承認できます
- 自然言語での指示に対応し、複雑なタスクを段階的に実行

#### 2. 非対話モード（Printモード）
- スクリプト、CIパイプライン、自動化などの非対話シナリオに対応
- 特定のプロンプトとモデルを指定して実行可能
- 出力形式を指定して結果を取得可能（テキスト形式など）
- 結果を標準出力に出力するため、CI/CDパイプラインへの統合が容易

#### 3. セッション管理
- 以前の会話を再開し、複数回のやり取りにわたって文脈を維持
- チャット履歴の一覧表示や特定の会話への復帰が可能
- 継続的な作業の文脈を保持し、長期的なタスクの管理に役立つ

#### 4. シェルモード
- 会話を離れずにCLIからシェルコマンドを直接実行可能
- 安全チェック付きで、結果が会話内に表示される
- 短時間で非対話型のコマンドに適している

#### 5. MCP（Model Context Protocol）サポート
- エージェントはMCPをサポートしており、拡張機能や統合のために使用可能
- CLIは`mcp.json`の設定ファイルを自動検出して反映
- IDEで設定したのと同じMCPサーバーとツールを有効化
- 社内環境に最適化されたAIモデルをセキュアに活用可能

#### 6. ルールシステム
- CLIエージェントはIDEと同じルールシステムに対応
- `.cursor/rules`ディレクトリにルールを作成して、エージェントにコンテキストとガイダンスを提供可能
- プロジェクトの異なる部分や特定のファイルタイプごとにエージェントの挙動をカスタマイズ可能

#### 7. 設定ファイルによるカスタマイズ
- `cli-config.json`ファイルを使用して設定を管理
- 全体設定とプロジェクトごとの設定をサポート
- エディタのVimモードの有効化や権限の設定などが可能

## コスト

### 現在の料金プラン

Cursor CLIは現在**ベータ版**として提供されており、**無料で利用可能**です。ただし、正式リリース後の料金プランについては、公式サイトでの最新情報を確認する必要があります。

### Cursor IDEとの関係

Cursor CLIの利用料金は、Cursor IDEのプランに依存する可能性があります。Cursor IDEのプランは以下の通りです：

- **無料プラン**: 基本的な機能が利用可能（月間のリクエスト数に制限がある場合があります）
- **Proプラン**: 月額20ドル（年間サブスクリプション割引適用時は月額17ドル）
- **Businessプラン**: 月額40ドル（年払いの場合）
- **Enterpriseプラン**: 営業担当者にお問い合わせ

### 注意事項

- 2025年8月時点では、エンタープライズプランではCursor CLIが利用できない場合があります
- 大規模なチームや企業での利用には制限がある可能性があります
- 正式リリース後に料金プランが変更される可能性があります

最新の料金情報については、[Cursor公式サイト](https://cursor.com/pricing)を参照してください。

## インストール方法

### システム要件

Cursor CLIは以下の環境で動作します：

- **オペレーティングシステム**: 
  - macOS
  - Linux（Ubuntu 20.04+/Debian 10+など）
  - Windows（WSL2推奨）
- **シェル**: Bash、Zsh、またはFishで最適に動作
- **ネットワーク**: 認証とAI処理にインターネット接続が必要
- **アカウント**: Cursorアカウントが必要（無料プランまたは有料プラン）

### macOSでのインストール

#### 方法1: 公式インストールスクリプト（推奨）

1. ターミナルを開きます

2. 以下のコマンドを実行します：

   ```bash
   curl https://cursor.com/install -fsS | bash
   ```

   または：

   ```bash
   curl -fsSL https://cursor.sh/install.sh | sh
   ```

3. インストールが完了したら、バージョンを確認します：

   ```bash
   cursor-agent --version
   ```

4. PATHの設定（必要に応じて）

   `~/.local/bin`をPATHに追加することで、どのディレクトリからでも`cursor-agent`コマンドを使用できるようになります。

   **zshを使用している場合:**

   ```bash
   echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.zshrc
   source ~/.zshrc
   ```

   **bashを使用している場合:**

   ```bash
   echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.bashrc
   source ~/.bashrc
   ```

5. 動作確認

   ```bash
   cursor-agent --help
   ```

   または簡単なテスト：

   ```bash
   cursor-agent "Hello Worldを表示するプログラムを作成"
   ```

### Windowsでのインストール

#### 方法1: WSL2を使用する場合（推奨）

1. WSL2をインストールしていない場合は、まずWSL2をセットアップします

2. WSL2のターミナルを開き、以下のコマンドを実行します：

   ```bash
   curl https://cursor.com/install -fsS | bash
   ```

3. インストール後の確認はmacOSと同様です

#### 方法2: PowerShellを使用する場合

1. PowerShellを管理者権限で開きます

2. 以下のコマンドを実行します：

   ```powershell
   curl -fsSL https://cursor.sh/install.ps1 | powershell
   ```

   または：

   ```powershell
   Invoke-WebRequest -Uri https://cursor.com/install -UseBasicParsing | Invoke-Expression
   ```

3. インストール後、PowerShellを再起動してから動作確認を行います：

   ```powershell
   cursor-agent --version
   ```

### Linuxでのインストール

Linuxでのインストール手順はmacOSと同様です：

```bash
curl https://cursor.com/install -fsS | bash
```

インストール後、PATHの設定と動作確認を行ってください。

### インストール後の設定

1. **認証**

   初回実行時にCursorアカウントでログインする必要があります。プロンプトに従って認証を完了してください。

2. **動作確認**

   ```bash
   cursor-agent --version
   cursor-agent --help
   ```

### トラブルシューティング

- **コマンドが見つからない場合**: `~/.local/bin`がPATHに含まれているか確認してください
- **権限エラー**: インストールスクリプトの実行権限を確認してください
- **ネットワークエラー**: インターネット接続とファイアウォール設定を確認してください

## 特徴や得意なこと・苦手なこと

### 得意なこと

#### 1. コード生成・修正・レビュー
- 自然言語での指示からコードを生成・修正
- 既存のコードに対するレビューや改善提案
- バグ修正やリファクタリングの支援

#### 2. コードリファクタリング
- コードの可読性や保守性を向上させるためのリファクタリングを支援
- 大規模なコードベースの構造改善
- パターンの統一やベストプラクティスの適用

#### 3. パフォーマンス最適化
- コードのパフォーマンス向上のための提案や修正
- ボトルネックの特定と最適化
- メモリ使用量の改善

#### 4. セキュリティレビュー
- コード内のセキュリティ上の問題点を検出
- 脆弱性の修正案を提示
- Gitの変更内容のセキュリティレビュー

#### 5. ドキュメント生成
- コードから自動的にドキュメントを生成
- APIドキュメントの作成
- コードの説明やコメントの追加

#### 6. CI/CDパイプライン統合
- 非対話モードを活用して、CI/CDパイプライン内での自動化を実現
- コードレビューの自動化
- テスト生成や実行の支援

#### 7. ターミナル統合
- IDEを開かずに、ターミナル内で直接AIによるコード生成やレビューが可能
- 既存のGitやCIのワークフローに自然に統合
- 開発者の作業効率を向上

#### 8. 多言語対応
- Python、JavaScript、Java、C/C++、Go、Ruby、PHPなど、主要なプログラミング言語に対応
- 複数のプログラミング言語やフレームワークをサポート

### 苦手なこと・制限事項

#### 1. 日本語対応の課題
- Cursor CLIは英語中心の設計であり、日本語でのコミットメッセージやドキュメント生成には課題があります
- 日本語での指示は理解できますが、最適化は英語の方が効果的です

#### 2. エンタープライズプランの制限
- 2025年8月時点では、エンタープライズプランが提供されておらず、大規模チームでの利用には制限があります
- 大規模な組織での導入には、段階的な検証と代替手段の併用が推奨されます

#### 3. ベータ版の制限
- 現在ベータ版であるため、安定性や機能面での制限が存在する可能性があります
- エージェントの提案や修正内容は、開発者自身で確認・検証する必要があります
- セキュリティ保護は進化の途上にあり、信頼できる環境でのみ使用することが推奨されます

#### 4. 複雑なプロジェクトの全体的な理解
- 大規模で複雑なプロジェクト全体のコンテキストを完全に把握することは難しい場合があります
- 非常に複雑なアーキテクチャの理解には限界があります

#### 5. 創造的な設計やアーキテクチャの提案
- 基本的な設計やアーキテクチャの提案は可能ですが、創造的で革新的な設計を求める場合、人間のエンジニアの判断が必要です
- 複雑なGUI操作を多用する開発には不向きです

#### 6. 特定の言語やフレームワークへの最適化
- 一部の言語やフレームワークに特化した機能は限定的です
- 最新のフレームワークやライブラリへの対応が遅れる場合があります

## 実装されている機能

### 1. インタラクティブモード

ターミナル上での対話型のコード生成・編集が可能です。

```bash
# 対話セッションを開始
cursor-agent

# 初期プロンプトを指定して開始
cursor-agent "authモジュールをJWTトークンを用いるようにリファクタリングして"
```

### 2. 非対話モード（Printモード）

結果を標準出力に出力するモードで、スクリプトやCI/CDパイプラインでの利用に適しています。

```bash
# 特定のプロンプトとモデルで実行
cursor-agent -p "パフォーマンス問題を見つけて修正して" --model "gpt-5"

# レビューのためにgitの変更を含めて実行
cursor-agent -p "これらの変更にセキュリティ上の問題がないかレビューして" --output-format text
```

### 3. セッション管理

過去の会話の一覧表示や再開が可能で、長期的なタスクの管理に役立ちます。

```bash
# これまでのチャットをすべて一覧表示
cursor-agent ls

# 直近の会話を再開
cursor-agent resume

# 特定の会話を再開
cursor-agent --resume="chat-id-here"
```

### 4. シェルモード

会話を離れずにCLIからシェルコマンドを直接実行できます。

```bash
# シェルモードでコマンドを実行
cursor-agent shell "ls -la"
```

### 5. MCPサポート

Model Context Protocolをサポートし、拡張機能や統合を容易にします。

- `mcp.json`の設定ファイルを自動検出して反映
- IDEで設定したのと同じMCPサーバーとツールを有効化
- 社内環境に最適化されたAIモデルをセキュアに活用可能

### 6. ルールシステム

`.cursor/rules`ディレクトリにルールを作成することで、エージェントにコンテキストとガイダンスを提供できます。

例：`.cursor/rules/api.md`

```markdown
# API開発ルール

- RESTful APIの原則に従う
- エラーハンドリングを必ず実装する
- すべてのエンドポイントにドキュメントを追加する
```

### 7. 設定ファイルによるカスタマイズ

`cli-config.json`ファイルを使用して、Cursor CLIの設定を行います。

設定例：

```json
{
  "vimMode": true,
  "permissions": {
    "read": true,
    "write": true,
    "execute": false
  }
}
```

### 8. コード生成・修正・レビュー

AIエージェントがコードの生成、修正、レビュー、ドキュメント化を支援します。

### 9. マルチモーダルAI活用

テキスト以外の視覚情報も含めた総合的な開発支援が可能です。

### 10. Git統合

既存のGitワークフローに自然に統合でき、変更内容のレビューや分析が可能です。

## 基本的な使い方

### 基本的なコマンド

Cursor CLIは、ターミナルで`cursor-agent`コマンドを実行することで起動します。

```bash
cursor-agent
```

### インタラクティブモードでの基本的なワークフロー

1. **タスクの説明**
   - 自然言語でやりたいことを説明します
   - 例：「認証モジュールをJWTトークンを用いるようにリファクタリングして」

2. **提案の確認**
   - エージェントが計画や変更を提案します
   - 必要に応じて承認または修正を指示します

3. **実行**
   - エージェントが自動的にコードを生成・変更します
   - 各ステップで確認を求められる場合があります

4. **レビュー**
   - 生成されたコードや変更を確認します
   - 必要に応じて追加の修正を依頼します

### よく使うコマンド

```bash
# ヘルプの表示
cursor-agent --help

# バージョンの確認
cursor-agent --version

# 対話セッションの開始
cursor-agent

# 初期プロンプトを指定して開始
cursor-agent "タスクの説明"

# 非対話モードで実行
cursor-agent -p "プロンプト" --model "gpt-5"

# セッション一覧の表示
cursor-agent ls

# 直近の会話を再開
cursor-agent resume
```

## 使用例・デモ

### 例1: コードのリファクタリング

```bash
cursor-agent "authモジュールをJWTトークンを用いるようにリファクタリングして"
```

エージェントは以下を実行します：
- 既存の認証コードの分析
- JWTトークン実装への変更計画の提示
- コードの変更とテストの実行
- 変更内容の説明

### 例2: パフォーマンス問題の特定と修正

```bash
cursor-agent -p "パフォーマンス問題を見つけて修正して" --model "gpt-5"
```

エージェントは以下を実行します：
- コードベースの分析
- パフォーマンスボトルネックの特定
- 最適化の提案と実装
- 改善結果の報告

### 例3: セキュリティレビュー

```bash
cursor-agent -p "これらの変更にセキュリティ上の問題がないかレビューして" --output-format text
```

エージェントは以下を実行します：
- Gitの変更内容の確認
- セキュリティ脆弱性の検出
- 問題点のレポート生成
- 修正提案の提示

### 例4: CIパイプラインでの自動化

CIパイプラインでコードレビューを自動化する例：

```bash
#!/bin/bash
# CIスクリプトの例

cursor-agent -p "プルリクエストの変更をレビューして、問題があれば報告して" \
  --output-format text \
  --model "gpt-5" > review_report.txt
```

### 例5: 継続的な作業の文脈保持

```bash
# 最初のセッション
cursor-agent "ユーザー認証機能を実装して"

# 作業を中断して後で再開
cursor-agent resume

# または特定の会話を再開
cursor-agent --resume="chat-id-here"
```

以前の会話の文脈を保持しながら、継続的な作業が可能です。

## セキュリティと注意事項

### セキュリティ機能

Cursor CLIは現在ベータ版であり、セキュリティ保護は進化の途上にあります。以下の点に注意してください：

- **エージェントの権限**: エージェントは、ユーザーが承認したシェルコマンドを実行できます
- **ファイル操作**: ファイルの読み取り・変更・削除が可能です
- **信頼できる環境**: 信頼できる環境でのみ使用することを推奨します

### 使用上の注意

- **ベータ版**: Cursor CLIは現在ベータ版のため、本番環境での使用は慎重に検討してください
- **承認プロセス**: エージェントが実行するコマンドは必ず確認してから承認してください
- **機密情報**: 機密情報を含むコードを扱う場合は、セキュリティポリシーを確認してください
- **バックアップ**: 重要な変更を行う前に、コードのバックアップを取ることを推奨します

## 参考資料

### 公式ドキュメント

- [Cursor CLI 概要](https://docs.cursor.com/ja/cli/overview)
- [Cursor CLI インストール](https://docs.cursor.com/ja/cli/installation)
- [Cursor CLI 使用方法](https://docs.cursor.com/ja/cli/using)
- [Cursor CLI シェルモード](https://docs.cursor.com/ja/cli/shell-mode)
- [Cursor CLI 設定リファレンス](https://docs.cursor.com/ja/cli/reference/configuration)

### 公式ブログ・アナウンス

- [Cursor CLI ブログ記事](https://cursor.com/ja/blog/cli)
- [Cursor 2.0リリース情報](https://www.issoh.co.jp/tech/details/9603/)

### 公式サイト

- [Cursor公式サイト](https://cursor.com)
- [Cursor 料金プラン](https://cursor.com/pricing)
- [Cursor ダウンロードページ](https://cursor.com/ja/downloads)

### コミュニティ・学習リソース

- [Cursor コミュニティ](https://cursor.com/community)
- [Learn Cursor - インストールと使用ガイド](https://learn-cursor.com/ja/wiki/user-guide/install)

### 日本語解説記事・ガイド

- [Cursor CLI徹底活用ガイド：ターミナル主導のAI開発を加速する実践知見](https://ainow.jp/cursor-cli-advanced/)
- [Cursor CLI使い方日本語ガイド](https://wzz.co.jp/ai_lab/cursor-cli-tsukaikata-nihongo-guide/)
- [Cursor Agent CLI完全ガイド：AIがあなたのプログラミングを劇的に変える、次世代開発ツールの全貌](https://kirekaku.com/1045/)
- [Cursorで何ができる？開発を加速する全機能徹底解説](https://t-cr.jp/article/7921ircnp9nm6ug)
- [Cursor（カーソル）完全ガイド！AIが支援する次世代コードエディタの使い方と最新機能まとめ](https://www.luft.co.jp/media/cursor/)
- [無料で使える次世代AIコードエディタ「Cursor」とは？機能・使い方・料金などを徹底解説](https://weel.co.jp/media/innovator/cursor/)
- [AIコードエディタ「Cursor」とは？使い方や料金、企業事例を徹底解説](https://weel.co.jp/media/cursor)
- [Cursorを使って開発効率を上げる！使い方やアプリ開発手順を徹底解説](https://www.sungrove.co.jp/cursor/)
- [Cursorとは？使い方や活用例、インストール手順などを解説](https://ainformation.jp/article/3434)
- [AIネイティブ開発コラム：Cursor vs Claude Code 実践レポート](https://www.hexabase.com/ai-driven-development-cursor-claude-code-report)
- [Cursor CLI比較：ターミナルAIコーディングツールの違い](https://exe.sub.jp/ai_fun/cursor-cli-hikaku-terminal-ai-coding-tool/)
- [Cursor CLI無料AIコーディングガイド](https://exe.sub.jp/ai_fun/cursor-cli-free-ai-coding-guide/)
- [Cursor CLI初心者ガイド：AIコーディングターミナル](https://exe.sub.jp/ai_fun/cursor-cli-beginner-guide-ai-coding-terminal/)
- [Cursor インストールガイド](https://ai-keiei.shift-ai.co.jp/cursor-install-guide/)
- [AI導入.com - Cursor記事](https://www.ai-dounyu.com/articles/cursor)
- [Chez moi - Cursorの使い方完全ガイド](https://chezmoi.ltd/ai-tool/how2-cursor/)

## まとめ

Cursor CLIは、開発者がターミナル環境でAIの力を活用し、効率的にコーディング作業を進めるための強力なツールです。インタラクティブモードと非対話モードの両方をサポートし、セッション管理、シェルモード、MCPサポート、ルールシステムなどの豊富な機能を備えています。

現在ベータ版ですが、継続的な改善が行われており、開発者のフィードバックを取り入れながら進化しています。信頼できる環境で適切に使用することで、開発プロセスの効率化と生産性向上が期待できます。

特に、CIパイプラインへの統合や自動化シナリオでの活用により、コードレビューやパフォーマンス最適化などの繰り返し作業を自動化できる可能性を秘めています。ただし、日本語対応の課題やエンタープライズプランの制限など、いくつかの制約があることも認識しておく必要があります。
