# Gemini CLI

## 概要・特徴

Gemini CLIは、Googleが2025年6月に発表したオープンソースのAIエージェントで、ターミナルから直接Geminiの機能を利用できるコマンドラインツールです。開発者はこれを使用して、コード生成、ファイル管理、ツールの呼び出し、他のアプリとの連携、コンテキストの理解など、多岐にわたるタスクを効率的に実行できます。

### 主な特徴

#### 1. 高性能なAIモデルの統合
- Gemini 2.5 Proモデルを利用
- 長い対話や複雑な指示にも対応可能
- 自然言語での指示に基づき、コードの生成やバグ修正を実行

#### 2. コード生成と理解
- 自然言語での指示を理解し、コードの生成や既存コードの理解を支援
- PythonでのCLIツール作成、ディレクトリ内のコードの処理フローを図解付きで解説
- プロジェクト全体をコンテキストに含めて構造を理解し、分析を実行

#### 3. ファイル操作機能
以下のファイル操作ツールを内蔵：
- `ReadFile`: ファイル内容の読み込み
- `Edit`: ファイルの編集と差分表示
- `SearchText`: プロジェクト全体での文字列検索
- `@`マークを使用してファイルやフォルダの内容を直接Geminiへの入力に組み込み可能

#### 4. Google Web Searchとの統合
- リアルタイムで最新の情報を取得
- Google検索結果の取得と要約
- Webページのコンテンツ取得
- 調査や検証作業の効率化

#### 5. システム操作機能
- `Shell`: シェルコマンドの安全な実行
- Dockerサンドボックス: 隔離された実行環境の提供
- セキュリティを考慮したコマンド実行

#### 6. 拡張機能とカスタマイズ
- **MCPサーバー連携**: カスタムツールの追加が可能
- **`GEMINI.md`ファイル**: プロジェクト固有の指示を設定可能
- **Googleデータクラウドサービス向けの拡張機能**: Cloud SQL、AlloyDB、BigQueryなどのサービスと連携
- **セキュリティ分析の自動化**: コード変更の分析、脆弱性の特定、実用的なフィードバックの提供

#### 7. オープンソース
- 完全オープンソースで提供
- 透明性とセキュリティの確保
- コミュニティによる拡張と改善が可能

#### 8. 他ツールとの統合
- Zedコードエディタとの統合（2025年8月発表）
- GitHubとの連携（2025年8月発表）
- 他のアプリケーションとの連携が可能

## インストール方法

### システム要件

以下のシステム要件を満たしている必要があります：

- **オペレーティングシステム**: 
  - Windows 10+
  - macOS 10.15+
  - Linux（Ubuntu 20.04+/Debian 10+など）

- **ソフトウェア**: Node.js v18以上

- **ネットワーク**: 認証とAI処理にインターネット接続が必要

- **認証**: 以下のいずれかが必要
  - Googleアカウント（無料枠利用の場合）
  - Gemini APIキー
  - Vertex AIキー

### インストール手順

#### 方法1: npmを使用したインストール（推奨）

1. **Node.jsの確認**
   ```bash
   node --version
   ```
   Node.js v18以上がインストールされていることを確認してください。

2. **Gemini CLIのインストール**
   ```bash
   npm install -g @google/gemini-cli
   ```

3. **初回起動と認証**
   インストール後、ターミナルで以下のコマンドを実行します：
   ```bash
   gemini
   ```
   
   初回起動時には以下の設定が求められます：
   - カラーテーマの選択
   - 認証方法の選択：
     - **Googleアカウントでのログイン**: ブラウザが起動し、Googleアカウントでの認証が求められます。無料枠として1分間に60リクエスト、1日1000リクエストが提供されます。
     - **APIキーの使用**: Gemini APIキーを入力します。
     - **Vertex AIキーの使用**: Vertex AIキーを入力します。

#### 方法2: Homebrewを使用したインストール（macOS/Linux）

```bash
brew install gemini-cli
```

#### 方法3: Google Cloud Shellを使用

Google Cloud Shellを活用することで、セットアップの手間を省くことができます。Google Cloud Shellには、必要な環境が既に整っているため、すぐに利用を開始できます。

### 認証方法の詳細

#### 無料枠（Googleアカウントでのログイン）
- **制限**: 1分間に60リクエスト、1日1000リクエスト
- **用途**: 個人利用や小規模なプロジェクトに適しています
- **認証**: ブラウザが起動し、Googleアカウントでのサインインが必要

#### APIキー方式
- **制限**: APIキーの設定に応じた制限
- **用途**: より多くのリクエストが必要な場合
- **設定**: Google Cloud ConsoleでAPIキーを取得し、認証時に入力

#### Vertex AI方式
- **制限**: Vertex AIの設定に応じた制限
- **用途**: エンタープライズ環境での利用
- **設定**: Vertex AIの認証情報を使用

## 基本的な使い方

### 基本的なコマンド

Gemini CLIは、ターミナルで`gemini`コマンドを実行することで起動します。

```bash
gemini
```

### 対話モード

`gemini`コマンドを実行すると、対話モードが始まります。ここで自然言語で指示を入力すると、AIが応答します。

```bash
gemini
# プロンプトが表示されたら、自然言語で質問や指示を入力
```

### よく使うコマンド

#### `/memory`
テキストの内容をメモリに記憶させたり、記憶したメモリを表示・再読み込みするコマンドです。

```
/memory このプロジェクトはNode.jsアプリケーションです
/memory show  # 記憶したメモリを表示
```

#### `/compress`
長く続いたチャットを要点だけにまとめ、トークン数の消費を抑えるためのコマンドです。

```
/compress
```

#### `/tools`
Gemini CLIに統合された外部ツールを一覧で確認するコマンドで、各ツールの役割も確認できます。

```
/tools
```

#### `@`を使用したファイルの読み込み
`@`マークの後にファイル名やフォルダ名を入力すると、その内容をGeminiに読み込ませることができます。

```
@README.md  # README.mdファイルの内容を読み込む
@src/       # srcディレクトリ全体の内容を読み込む
```

### 基本的なワークフロー

1. **タスクの説明**
   - 自然言語でやりたいことを説明します
   - 例：「PythonでCLIツールを作成してください」

2. **コンテキストの提供**
   - 必要に応じて`@`を使用してファイルやディレクトリを指定
   - プロジェクト全体の構造を理解させることが可能

3. **実行と確認**
   - Gemini CLIがコードを生成・実行します
   - 生成されたコードを確認し、必要に応じて修正を依頼します

## 使用例・デモ

### 例1: コード生成

```bash
gemini
```

プロンプト例：
```
「PythonでCLIツールを作成してください。ファイルを読み込んで、行数をカウントする機能を実装してください」
```

Gemini CLIは以下を自動的に実行します：
- Pythonスクリプトの作成
- コマンドライン引数の処理
- ファイル読み込みと行数カウント機能の実装
- エラーハンドリングの追加

### 例2: コードの理解と分析

```bash
gemini
```

プロンプト例：
```
@src/ このプロジェクトの構造を説明し、処理フローを図解付きで解説してください
```

Gemini CLIは以下を実行します：
- プロジェクト全体の構造を分析
- 処理フローを理解
- 図解付きで説明を提供

### 例3: Web検索との統合

```bash
gemini
```

プロンプト例：
```
「最新のPython 3.12の新機能について調べて、要約してください」
```

Gemini CLIは以下を実行します：
- Google検索を使用して最新情報を取得
- 情報を要約して提供

### 例4: ファイルの編集と改善

```bash
gemini
```

プロンプト例：
```
@app.js このコードを最適化し、パフォーマンスを改善してください
```

Gemini CLIは以下を実行します：
- コードを分析
- 最適化の提案と実装
- 変更内容の差分を表示

### 例5: プロジェクト特化型アシスタントの設定

プロジェクトのルートディレクトリに`GEMINI.md`ファイルを作成することで、プロジェクト固有の指示を設定できます。

```markdown
# プロジェクト設定

このプロジェクトはTypeScriptで書かれたReactアプリケーションです。
- ESLintとPrettierを使用しています
- コンポーネントは関数型コンポーネントのみを使用します
- テストはJestとReact Testing Libraryを使用します
```

このファイルを作成すると、Gemini CLIはプロジェクトの文脈を理解し、適切なコード生成や提案を行います。

### 活用事例

#### 1. 情報収集の自動化
毎朝の業界ニュースの要約をGemini CLIに依頼することで、情報収集の時間を大幅に短縮できます。

```
「今日のAI関連のニュースを検索して、重要なポイントを要約してください」
```

#### 2. 顧客対応の効率化
ECサイト運営会社での問い合わせ対応において、Gemini CLIを活用することで、対応時間の短縮と回答品質の向上が期待できます。

#### 3. コードレビューの支援
プロジェクト全体をコンテキストに含めて、コードレビューや改善提案を依頼できます。

```
@src/ このコードベースをレビューして、改善点を提案してください
```

#### 4. ドキュメント生成
既存のコードから自動的にドキュメントを生成することができます。

```
@src/ このコードベースのAPIドキュメントを生成してください
```

## 料金と制限

### 無料枠（Googleアカウントでのログイン）
- **制限**: 1分間に60リクエスト、1日1000リクエスト
- **料金**: 完全無料
- **用途**: 個人利用や小規模なプロジェクトに適しています

### APIキー方式
- **料金**: Gemini APIの料金体系に準拠
- **制限**: APIキーの設定に応じた制限
- **用途**: より多くのリクエストが必要な場合

### Vertex AI方式
- **料金**: Vertex AIの料金体系に準拠
- **制限**: Vertex AIの設定に応じた制限
- **用途**: エンタープライズ環境での利用

## セキュリティと注意点

### セキュリティ機能

- **コマンドのホワイトリスト**: 実行可能なコマンドを制限
- **Dockerサンドボックス**: 隔離された実行環境の提供
- **セキュアな認証**: GoogleアカウントまたはAPIキーによる認証

### 既知の脆弱性と対策

#### 過去の脆弱性（2025年6月）
リリース直後、Gemini CLIにおいて、特定のファイル（例: README.md）内に隠された悪意のあるコマンドが実行される可能性がある脆弱性が発見されました。

- **問題**: コマンドのホワイトリスト機能に欠陥があり、悪意のあるコードが実行される可能性
- **修正**: バージョン0.1.14で修正済み
- **対策**: 最新バージョンへのアップデートを推奨

#### ファイル削除のリスク
誤ったコマンド解釈によりユーザーファイルが削除される事例も報告されています。

- **対策**: 
  - 常に最新バージョンへのアップデート
  - 信頼できないファイルを扱う際の注意
  - 重要なファイルのバックアップ

### 推奨事項

1. **最新バージョンの使用**: 常に最新バージョンにアップデートしてください
   ```bash
   npm update -g @google/gemini-cli
   ```

2. **信頼できるファイルのみ使用**: 信頼できないファイルを扱う際は注意が必要です

3. **バックアップ**: 重要なファイルは定期的にバックアップを取ってください

4. **セキュリティ設定の確認**: 環境に応じて適切なセキュリティ設定を行ってください

## メリットとデメリット

### メリット

- **完全無料**: 無料枠で毎日1,000リクエスト利用可能
- **リアルタイム情報**: Google Web Searchとの統合により、最新の情報を活用可能
- **オープンソース**: 透明性とセキュリティの確保
- **高い拡張性**: MCPサーバーによるカスタムツールの追加やプラグインエコシステムへの対応
- **プロジェクト特化**: `GEMINI.md`ファイルにより、プロジェクト固有の指示を設定可能
- **多様な認証方式**: 無料枠、APIキー、Vertex AIから選択可能

### デメリット

- **プレビュー段階**: バグや予期しない動作の可能性がある
- **機能の変更リスク**: 機能が突然変更される可能性がある
- **セキュリティリスク**: 過去に脆弱性が報告されており、常に最新バージョンの使用が推奨される
- **検索結果の処理**: Web検索結果の処理方法には制限があり、改善の余地がある

## 他ツールとの比較

### Gemini SDK
- **目的**: 自社システムやアプリへのAI機能組み込み
- **用途**: 開発キットとしての利用

### Gemini Code Assist
- **目的**: コードエディタ内でのリアルタイム作業支援
- **用途**: IDE統合型のコーディングアシスタント

### Gemini CLI
- **目的**: ターミナル上でのAIエージェントとしての利用
- **用途**: コマンドラインからの直接的なAI活用

各ツールは異なる用途に特化しており、目的に応じて選択することが重要です。

## 参考資料

### 公式ドキュメント
- [Google Cloud Blog - Introducing Gemini CLI](https://cloud.google.com/blog/ja/topics/developers-practitioners/introducing-gemini-cli)
- [Gemini CLI GitHub Repository](https://github.com/google/gemini-cli)
- [Google Cloud Blog - Gemini CLI Extensions for Google Data Cloud](https://cloud.google.com/blog/ja/products/databases/gemini-cli-extensions-for-google-data-cloud)
- [Google Cloud Blog - Automate App Deployment and Security Analysis](https://cloud.google.com/blog/ja/products/ai-machine-learning/automate-app-deployment-and-security-analysis-with-new-gemini-cli-extensions)

### NPMパッケージ
- [@google/gemini-cli](https://www.npmjs.com/package/@google/gemini-cli)

### 関連記事・ブログ
- [Zenn - Gemini CLI入門](https://zenn.dev/daideguchi/articles/fe42feb467b720)
- [Zenn - Gemini CLIの使い方](https://zenn.dev/oikon/articles/c8a887f00dd219)
- [Qiita - Gemini CLI セットアップ](https://qiita.com/Takuya__/items/ba869f84238ce916dd1d)

### セキュリティ関連
- [TechRadar - Google Gemini Security Flaw](https://www.techradar.com/pro/security/google-gemini-security-flaw-could-have-let-anyone-access-systems-or-run-code)
- [IT Pro - Gemini CLI Security Flaw](https://www.itpro.com/security/a-flaw-in-googles-new-gemini-cli-tool-couldve-allowed-hackers-to-exfiltrate-data)

### ニュース・発表
- [TechRadar - Google Gemini and GitHub Partnership](https://www.techradar.com/pro/google-gemini-and-github-are-teaming-up-for-ai-powered-coding)
- [Android Central - Gemini CLI and Zed Code Editor Partnership](https://www.androidcentral.com/apps-software/ai/gemini-cli-zed-code-editor-partnership)

## まとめ

Gemini CLIは、ターミナル上で直接AIを活用できる強力なツールであり、開発者の作業効率を大幅に向上させる可能性を秘めています。コード生成、ファイル管理、Web検索との統合、拡張機能のサポートなど、多彩な機能を備えており、導入も容易で、認証方式も柔軟に選択可能です。

特に、完全無料で利用できる無料枠や、オープンソースによる透明性、MCPサーバーによる高い拡張性、プロジェクト特化型の設定機能などが魅力的な特徴です。

ただし、プレビュー段階のツールであるため、バグや予期しない動作の可能性があり、過去にセキュリティ上の脆弱性も報告されています。常に最新バージョンへのアップデートと、適切なセキュリティ対策を行うことが重要です。

適切なインストールと設定、セキュリティ対策を行い、効果的に活用することで、開発プロセスの効率化と生産性向上が期待できます。
