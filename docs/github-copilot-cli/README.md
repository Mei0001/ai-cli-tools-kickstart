# GitHub Copilot CLI

## 概要・特徴

GitHub Copilot CLIは、GitHub CopilotのAIコーディング支援機能を直接ターミナル環境で利用できるコマンドラインインターフェースです。開発者は自然言語を用いてコードの作成、デバッグ、リファクタリングなどを効率的に行うことが可能となり、IDEへの依存を減らしながらターミナル内で完結した開発体験を提供します。

### 主な特徴

#### 1. ターミナルネイティブな開発
- ターミナル内で直接Copilotの機能を活用でき、作業の流れを中断することなくコーディングが可能
- IDEへの依存を減らし、開発者の好みのエディタやツールと組み合わせて使用可能
- 自然言語での指示により、コマンドライン作業を効率化

#### 2. GitHubとの深い統合
- リポジトリ、Issue、プルリクエストなどのGitHubリソースに自然言語でアクセス可能
- 既存のGitHubアカウントで認証が可能で、追加の設定が不要
- GitHubのワークフローとシームレスに連携
- リポジトリのコンテキストを理解し、適切な提案やコード生成を実行

#### 3. エージェント機能
- 複雑なタスクの計画や実行をAIが支援
- コードの生成、編集、デバッグ、リファクタリングを自動でサポート
- タスクを適切に分解し、段階的に実行
- 高レベルな指示から詳細な実装まで自動で処理

#### 4. MCPによる拡張性
- Model Context Protocol (MCP) サーバーを通じて機能拡張が可能
- GitHubのMCPサーバーをデフォルトで使用
- カスタムMCPサーバーの利用をサポートし、独自のツールやコンテキストを追加可能
- 開発環境に応じた柔軟なカスタマイズが可能

#### 5. 完全な制御と透明性
- すべてのアクションは実行前にプレビューされる
- ユーザーの明示的な承認なしに何も実行されない
- ファイル変更やコマンド実行のすべてが可視化される
- 組織の既存のCopilotガバナンスポリシーを自動的に継承

#### 6. 複数のAIモデルに対応
- デフォルトではClaude Sonnet 4.5が使用される
- `/model`コマンドで他のモデル（GPT-5、Gemini 2.5 Proなど）を選択可能
- Pro、Business、EnterpriseプランのプレミアムサブスクライバーはGemini 2.5 Proにもアクセス可能

## インストール方法

### システム要件

以下のシステム要件を満たしている必要があります：

- **オペレーティングシステム**: 
  - macOS
  - Linux
  - Windows（WSL経由、または実験的なネイティブサポート）

- **ソフトウェア**: 
  - Node.js v22以上
  - npm v10以上
  - （Windowsの場合）PowerShell v6以上

- **サブスクリプション**: 
  - GitHub Copilotの有効なサブスクリプション（Pro、Pro+、Business、Enterpriseプラン）
  - 組織やエンタープライズ経由でCopilotにアクセスしている場合、組織の設定でCopilot CLIの使用が有効化されている必要があります

### インストール手順

1. **Node.jsとnpmの確認**
   ```bash
   node --version  # v22以上であることを確認
   npm --version   # v10以上であることを確認
   ```

2. **GitHub Copilot CLIのインストール**
   以下のコマンドでグローバルにインストールします：
   ```bash
   npm install -g @github/copilot
   ```

3. **初回起動と認証**
   インストール後、ターミナルで以下のコマンドを実行します：
   ```bash
   copilot
   ```
   初回起動時には、GitHubアカウントでの認証が求められます。指示に従って認証を完了してください。

## 基本的な使い方

### 基本的なコマンド

GitHub Copilot CLIは、ターミナルで`copilot`コマンドを実行することで起動します。

```bash
copilot
```

### インタラクティブモード

デフォルトでは対話型セッションが開始され、自然言語で質問やタスクの指示が可能です。

```bash
copilot
# プロンプトが表示されたら、自然言語で指示を入力
```

### プログラムモード

コマンドラインで直接プロンプトを渡すことも可能です。

```bash
copilot -p "List my open PRs" --allow-all-tools
```

`--allow-all-tools`オプションを使用すると、Copilotがファイルの変更やコマンドの実行をユーザーの承認なしに行うことができます。注意して使用してください。

### スラッシュコマンド

対話型セッション内で使用できる特別なコマンド：

- **`/model`**: 利用可能なAIモデルを選択・変更
  - 例: `/model` でモデル一覧を表示
  - デフォルト: Claude Sonnet 4.5
  - 利用可能: GPT-5、Gemini 2.5 Pro（プレミアムプラン）など

- **`/feedback`**: フィードバックの送信
  - プライベートなフィードバックアンケートへの回答
  - バグレポートの送信
  - 新機能の提案

### 特殊なコマンド構文

ターミナル内で特定のコマンドについて説明や提案を取得できます：

- **`??`**: 一般的なシェルコマンドの生成や説明
  ```bash
  ?? how to find files modified in last 7 days
  ```

- **`git?`**: Gitコマンドに特化した支援
  ```bash
  git? how to undo the last commit
  ```

- **`gh?`**: GitHub CLIコマンドの生成や説明
  ```bash
  gh? how to create a new repository
  ```

### 基本的なワークフロー

1. **タスクの説明**
   - 自然言語でやりたいことを説明します
   - 例：「新しいAPIエンドポイントを作成してテストを追加してください」
   - 例：「オープンなプルリクエストを一覧表示してください」

2. **計画の確認**
   - Copilot CLIが計画を提示します
   - すべてのアクションがプレビューとして表示されます
   - 必要に応じて承認または修正を指示します

3. **実行**
   - ユーザーの承認後にCopilot CLIが自動的に実行します
   - 各ステップで確認を求められる場合があります

4. **レビュー**
   - 実行結果を確認します
   - 必要に応じて修正を依頼します

### よく使う機能

#### コードの生成・編集
```
「ユーザー認証機能を追加してください」
「REST APIを作成してください」
「この関数をリファクタリングしてください」
```

#### デバッグ
```
「このエラーメッセージを修正してください: [エラーメッセージ]」
「テストが失敗しています。原因を特定してください」
「パフォーマンスの問題を調査してください」
```

#### GitHubリソースへのアクセス
```
「オープンなプルリクエストを一覧表示してください」
「このIssueの詳細を表示してください」
「リポジトリの最近のコミットを確認してください」
```

#### コマンドの説明・提案
```
「特定のファイルを検索するコマンドを教えてください」
「最近変更されたファイルを見つける方法は？」
```

## 使用例・デモ

### 例1: 新しい機能の追加

```bash
copilot
```

プロンプト例：
```
「ユーザー登録機能を追加してください。メールアドレスとパスワードで登録できるようにし、バリデーションも含めてください」
```

Copilot CLIは以下を自動的に実行します：
- 必要なファイルの作成
- データベーススキーマの更新（必要に応じて）
- バリデーションロジックの実装
- テストの作成
- 実行前にすべての変更をプレビュー表示

### 例2: バグの修正

```bash
copilot
```

プロンプト例：
```
「アプリケーションが起動時にエラーが発生しています。エラーログを確認して修正してください」
```

Copilot CLIは以下を実行します：
- エラーログの分析
- 問題の特定
- 修正の実装
- 動作確認
- 各ステップで承認を求める

### 例3: GitHubリソースへのアクセス

```bash
copilot
```

プロンプト例：
```
「オープンなプルリクエストを一覧表示して、それぞれのレビューステータスを確認してください」
```

Copilot CLIは以下を実行します：
- GitHub APIを使用してプルリクエスト情報を取得
- レビューステータスを含む詳細情報を表示
- 必要に応じてアクションを提案

### 例4: コマンドの説明と提案

ターミナル内で直接コマンドの説明を取得：

```bash
?? how to find all Python files modified in the last week
```

または、Gitコマンドについて：

```bash
git? how to undo the last commit without losing changes
```

### 例5: 複雑なタスクの実行

```bash
copilot -p "新しいブランチを作成し、ユーザー認証機能を実装して、テストを追加し、プルリクエストを作成してください" --allow-all-tools
```

この例では、`--allow-all-tools`オプションにより、承認なしで一連のアクションが実行されます。

## セキュリティとガバナンス

### セキュリティ機能

- **完全な制御**: すべてのファイル変更やコマンド実行は、ユーザーの明示的な承認が必要
- **アクションプレビュー**: 実行前にすべてのアクションがプレビューされる
- **ガバナンスポリシーの継承**: 組織の既存のCopilotガバナンスポリシーを自動的に継承
- **透明性**: すべてのアクションが可視化され、承認なしに実行されない

### 組織での使用

- 組織やエンタープライズ経由でCopilotにアクセスしている場合、組織の設定でCopilot CLIの使用が有効化されている必要があります
- 組織のセキュリティポリシーやガバナンス設定が自動的に適用されます
- 管理者は組織レベルでCopilot CLIの使用を制御できます

## 料金とアクセス

### サブスクリプションプラン

GitHub Copilot CLIは、GitHub Copilotの有料サブスクリプションプランに含まれています：

- **Proプラン**: 個人向け、月額10ドル
- **Pro+プラン**: 個人向けプレミアムプラン
- **Businessプラン**: チーム向け
- **Enterpriseプラン**: エンタープライズ向け

### プレミアムリクエスト

- 各プロンプトの送信ごとに、月間のプレミアムリクエストのクォータが1つ消費されます
- プレミアムリクエストの数は、プランによって異なります
- クォータの残りは対話型セッション内で確認できます

### 追加料金

- Copilot CLIの使用に追加の料金は発生しません
- GitHub Copilotのサブスクリプションに含まれています
- 追加のAPIキーや設定は不要です

## 制限事項と注意点

### システム要件

- Node.js v22以上が必要（最新の機能を利用するため）
- npm v10以上が必要
- WindowsではWSL経由での使用が推奨される（ネイティブサポートは実験的）
- インターネット接続が必須（オフライン使用不可）

### 使用上の注意

- 組織経由でCopilotにアクセスしている場合、組織の設定でCopilot CLIの使用が有効化されている必要があります
- `--allow-all-tools`オプションは注意して使用してください。承認なしでアクションが実行されます
- 各プロンプトでプレミアムリクエストが消費されるため、クォータを確認しながら使用してください
- 大規模なコードベースでは、適切なモデルを選択することが重要です

### プラットフォーム別の注意

- **Windows**: WSL経由での使用が推奨されます。ネイティブなWindowsサポートは実験的機能です
- **macOS/Linux**: 完全にサポートされています

## 参考資料

### 公式ドキュメント

- [GitHub Copilot CLI 公式ページ](https://github.com/features/copilot/cli)
- [GitHub Copilot CLI リポジトリ](https://github.com/github/copilot-cli)
- [GitHub Copilot CLI の使用方法](https://docs.github.com/ja/copilot/how-tos/use-copilot-agents/use-copilot-cli)
- [GitHub Copilot CLI のインストール](https://docs.github.com/ja/enterprise-cloud@latest/copilot/how-tos/set-up/install-copilot-cli)
- [GitHub Copilot CLI について](https://docs.github.com/ja/copilot/concepts/agents/about-copilot-cli)

### NPMパッケージ

- [@github/copilot](https://www.npmjs.com/package/@github/copilot)

### サポート

- GitHub Copilot CLIに関するフィードバックは、対話型セッション内で`/feedback`コマンドを使用して送信できます
- GitHubのリポジトリでIssueを開くことも可能です

## まとめ

GitHub Copilot CLIは、ターミナル環境での開発体験を大幅に向上させる強力なツールです。GitHubとの深い統合、エージェント機能、MCPによる拡張性、完全な制御と透明性などの特徴を備え、さまざまな開発シナリオでの活用が可能です。

特に、GitHub Copilotの既存ユーザーにとっては、追加の設定やAPIキーなしでターミナル内でのAI支援開発を開始できる点が大きな利点です。適切なプランを選択し、システム要件を満たした上で導入することで、開発プロセスの効率化と生産性向上が期待できます。

また、GitHubリソースへの自然言語でのアクセス機能により、コードレビューやIssue管理などのワークフローも効率化でき、GitHub中心の開発フローに最適化されたツールと言えます。
